<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SafeTown Senior Robot: SafeTown Arduino Workspace/libraries/FreeRTOS Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">SafeTown Senior Robot
   </div>
   <div id="projectbrief">Arduino workspace for SafeTown Senior Robot development.</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('dir_969a1e4381de3e33d8fcf67adad41556.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">FreeRTOS Directory Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="subdirs" name="subdirs"></a>
Directories</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><span class="iconfclosed"></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_2e52888ac73bbce2b3b4aaa12a6f40e3.html">doc</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><span class="iconfclosed"></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_30a3cc5ececebdb0486d180e77c40041.html">src</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This is a fork of Richard Barry's FreeRTOS, optimised for the Arduino Microchip ATmega devices.</p>
<p>It has been created to provide access to FreeRTOS capabilities, with full compatibility to the Arduino IDE environment. It does this by keeping hands off almost everything, and only touching the minimum of hardware to be successful.</p>
<p>If you want to use FreeRTOS on the Renesas family of Arduino like the Arduino UNO R4, it is <a href="https://github.com/arduino/ArduinoCore-renesas/tree/main/libraries/Arduino_FreeRTOS">already included</a> in the default Arduino IDE. All that is required is to include the header file <code><a class="el" href="d6/d28/_arduino___free_r_t_o_s_8h_source.html">Arduino_FreeRTOS.h</a></code> provided by the Arduino IDE, and follow the information noted below.</p>
<h2><a class="anchor" id="autotoc_md34"></a>
Usage &amp; Further Reading</h2>
<p>Read the short blog post on <a href="https://feilipu.me/2015/11/24/arduino_freertos/">Arduino FreeRTOS</a> to get started. And there is another much older post on using <a href="https://feilipu.me/2011/09/22/freertos-and-libraries-for-avr-atmega/">FreeRTOS with AVR</a>, which may be useful to read too. There are some further posts I've written on <a href="https://www.hackster.io/feilipu">Hackster.IO</a>, but they're essentially the same content.</p>
<p>The canonical source for information is the <a href="https://www.freertos.org/">FreeRTOS Web Site</a>. Within this site, the <a href="https://www.freertos.org/FreeRTOS-quick-start-guide.html">Getting Started</a> page is very useful. This is the source for FreeRTOS usage (as distinct from installing and using this Arduino Library).</p>
<p>My other <a href="https://sourceforge.net/projects/avrfreertos/">AVRfreeRTOS Sourceforge Repository</a> or <a href="https://github.com/feilipu/avrfreertos">AVRfreeRTOS Github</a> has plenty of examples, ranging from <a href="https://sourceforge.net/projects/avrfreertos/files/MegaBlink/">blink</a> through to a <a href="https://sourceforge.net/projects/avrfreertos/files/GA_Synth/">synthesiser</a>.</p>
<p>This library was the genesis of <a href="https://github.com/FreeRTOS/FreeRTOS-Kernel/pull/48">generalised support for the ATmega platform within FreeRTOS</a>, and improvement of the <a href="https://github.com/FreeRTOS/FreeRTOS-Kernel/pull/942">stack depth type management</a>.</p>
<p>Over the past few years FreeRTOS development has become increasingly 32-bit orientated, now including symmetric multiprocessing, with little change or improvement for the 8-bit world. As such I'm treating this FreeRTOS V11.1.0 (updated April 22 2024) as my LTS release.</p>
<h2><a class="anchor" id="autotoc_md35"></a>
General</h2>
<p>FreeRTOS has a multitude of configuration options, which can be specified from within the <a class="el" href="de/d33/_free_r_t_o_s_config_8h_source.html">FreeRTOSConfig.h</a> file. To keep commonality with all of the Arduino hardware options, some sensible defaults have been selected. Feel free to change these defaults as you gain experience with FreeRTOS.</p>
<p>Normally, the ATmega Watchdog Timer is used to generate 15ms time slices (Ticks). For applications requiring high precision timing, the Ticks can be sourced from a hardware timer or external clock. See chapter <a class="el" href="d4/dc5/md__safe_town_01_arduino_01_workspace_2libraries_2_free_r_t_o_s_2doc_2tick__sources.html">Scheduler Tick Sources</a> for the configuration details.</p>
<p>Tasks that suspend or delay before their allocated time slice completes will revert execution back to the Scheduler.</p>
<p>The Arduino <code>delay()</code> function has been redefined to automatically use the FreeRTOS <code>vTaskDelay()</code> function when the delay required is one Tick or longer, by setting <code>configUSE_PORT_DELAY</code> to <code>1</code>, so that simple Arduino example sketches and tutorials work as expected. If you would like to measure a short millisecond delay of less than one Tick, then preferably use <a href="https://www.arduino.cc/reference/en/language/functions/time/millis/"><code>millis()</code></a> (or with greater granularity use <a href="https://www.arduino.cc/reference/en/language/functions/time/micros/"><code>micros()</code></a>) to achieve this outcome (for example see <a href="https://docs.arduino.cc/built-in-examples/digital/BlinkWithoutDelay">BlinkWithoutDelay</a>). However, when the delay requested is less than one Tick then the original Arduino <code>delay()</code> function will be automatically selected.</p>
<p>The 8-bit ATmega Timer0 has been added as an option for the experienced user. Please examine the Timer0 source code example to figure out how to use it. Reconfiguring Timer0 for the FreeRTOS Tick will break Arduino <code>millis()</code> and <code>micros()</code> though, as these functions rely on the Arduino IDE configuring Timer0. Example support for the Logic Green hardware using Timer 3 is provided via an open PR.</p>
<p>Stack for the <code>loop()</code> function has been set at 192 Bytes. This can be configured by adjusting the <code>configMINIMAL_STACK_SIZE</code> parameter. If you have stack overflow issues just increase it (within the SRAM limitations of your hardware). Users should prefer to allocate larger structures, arrays, or buffers on the heap using <code>pvPortMalloc()</code>, rather than defining them locally on the stack. Ideally you should <b>not</b> use <code>loop()</code> for your sketches, and then the Idle Task stack size can be reduced down to 92 Bytes which will save some valuable memory.</p>
<p>Memory for the heap is allocated by the normal C <code>malloc()</code> function, wrapped by the FreeRTOS <code>pvPortMalloc()</code> function. This option has been selected because it is automatically adjusted to use the capabilities of each device. Other heap allocation schemes are supported by FreeRTOS, and they can used with some additional configuration.</p>
<p>If you do not need to use FreeRTOS Timer API functions, then they can be disabled. This will remove the need for the Timer Task Stack, saving 92 Bytes of RAM.</p>
<h2><a class="anchor" id="autotoc_md36"></a>
Upgrading</h2>
<ul>
<li><a href="https://www.freertos.org/FreeRTOS-V9.html">Upgrading to FreeRTOS-9</a></li>
<li><a href="https://www.freertos.org/FreeRTOS-V10.html">Upgrading to FreeRTOS-10</a></li>
<li><a href="https://www.freertos.org/2023/12/introducing-freertos-kernel-version-11-0-0-a-major-release-with-symmetric-multiprocessing-smp-support.html">Symmetric Multiprocessing with FreeRTOS-11</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md37"></a>
Errors</h2>
<ul>
<li>Stack Overflow: If any stack (for the <code>loop()</code> or) for any Task overflows, there will be a slow LED blink, with 4 second cycle.</li>
<li>Heap Overflow: If any Task tries to allocate memory and that allocation fails, there will be a fast LED blink, with 100 millisecond cycle.</li>
</ul>
<h2><a class="anchor" id="autotoc_md38"></a>
Errata</h2>
<p>Testing with the Software Serial library shows some incompatibilities at low baud rates (9600), due to the extended time this library disables the global interrupt. Use the hardware USARTs.</p>
<h2><a class="anchor" id="autotoc_md39"></a>
Compatibility</h2>
<ul>
<li>ATmega328 @ 16MHz : Arduino UNO R3, Arduino Duemilanove, Arduino Diecimila, etc.</li>
<li>ATmega328 @ 16MHz : Adafruit Pro Trinket 5V, Adafruit Metro 328, Adafruit Metro Mini</li>
<li>ATmega328 @ 16MHz : Seeed Studio Stalker</li>
<li>ATmega328 @ 16MHz : Freetronics Eleven</li>
<li>ATmega328 @ 12MHz : Adafruit Pro Trinket 3V</li>
<li>ATmega32u4 @ 16MHz : Arduino Leonardo, Arduino Micro, Arduino Yun, Teensy 2.0</li>
<li>ATmega32u4 @ 8MHz : Adafruit Flora, Bluefruit Micro</li>
<li>ATmega1284p @ 16MHz: Sanguino, WickedDevice WildFire</li>
<li>ATmega1284p @ 24.576MHz : Seeed Studio Goldilocks Analogue</li>
<li>ATmega2560 @ 16MHz : Arduino Mega, Arduino ADK</li>
<li>ATmega2560 @ 16MHz : Seeed Studio ADK</li>
</ul>
<p>The new megaAVR 0-Series devices (eg. ATmega4809) are not fully compatible with this library. Their Timer configuration is substantially different from previous devices, and forms part of a new <b>avr8x</b> architecture. It may be a while until avr-libc is updated to include support for megaAVR devices, but when that happens further work will be added here.</p>
<p>The Arduino IDE supporting the Arduino UNO R4 already includes FreeRTOS as standard.</p>
<h2><a class="anchor" id="autotoc_md40"></a>
Files &amp; Configuration</h2>
<ul>
<li><code><a class="el" href="d6/d28/_arduino___free_r_t_o_s_8h_source.html">Arduino_FreeRTOS.h</a></code> : Must always be <code>#include</code> first. It references other configuration files, and sets defaults where necessary.</li>
<li><code><a class="el" href="de/d33/_free_r_t_o_s_config_8h_source.html">FreeRTOSConfig.h</a></code> : Contains a multitude of API and environment configurations.</li>
<li><code><a class="el" href="d0/dce/_free_r_t_o_s_variant_8h_source.html">FreeRTOSVariant.h</a></code> : Contains the ATmega specific configurations for this port of FreeRTOS.</li>
<li><code>heap_3.c</code> : Contains the heap allocation scheme based on <code>malloc()</code>. Other schemes are available, but depend on user configuration for specific MCU choice.</li>
</ul>
<h3><a class="anchor" id="autotoc_md41"></a>
PlatformIO</h3>
<p><a href="https://platformio.org/lib/show/507/FreeRTOS">Arduino FreeRTOS</a> is available in the <a href="https://docs.platformio.org/en/latest/librarymanager/index.html">PlatformIO library manager</a> for use in a <a href="https://docs.platformio.org/en/latest/projectconf/index.html">PlatformIO project</a>.</p>
<p>Watchdog period is configurable using build-flags:</p>
<div class="fragment"><div class="line">build_flags =</div>
<div class="line">  -DportUSE_WDTO=WDTO_15MS</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md42"></a>
Code of conduct</h3>
<p>See the <a href="https://github.com/feilipu/Arduino_FreeRTOS_Library/blob/master/CODE_OF_CONDUCT.md">Code of conduct</a>.</p>
<h2><a class="anchor" id="autotoc_md43"></a>
Contributors ✨</h2>
<p>![All Contributors](https://img.shields.io/badge/all_contributors-10-green.svg?style=flat-square)</p>
<p>Thanks goes to these wonderful people (<a href="https://allcontributors.org/docs/en/emoji-key">emoji key</a>):</p>
<table class="doxtable">
<tr>
<td align="center"><a href="https://feilipu.me/"><img src="https://avatars.githubusercontent.com/u/3955592" alt="" width="100px;" class="inline"/><br  />
<sub><b>Phillip Stevens</b></sub></a><br  />
🚧💻👀&lt;a title=Documentation"&gt;📖&lt;/a&gt;&lt;/td&gt;
    &lt;td align="center"&gt;&lt;a href="<a href="https://www.blackleg.es/">https://www.blackleg.es/</a>"&gt;&lt;img src="<a href="https://avatars.githubusercontent.com/u/4323228">https://avatars.githubusercontent.com/u/4323228</a>" width="100px;" alt=""/&gt;&lt;br /&gt;&lt;sub&gt;&lt;b&gt;Hector Espert&lt;/b&gt;&lt;/sub&gt;&lt;/a&gt;&lt;br /&gt;&lt;a title="Code"&gt;💻&lt;/a&gt;&lt;/td&gt;
    &lt;td align="center"&gt;&lt;a href="<a href="https://github.com/Floessie">https://github.com/Floessie</a>"&gt;&lt;img src="<a href="https://avatars.githubusercontent.com/u/10133457">https://avatars.githubusercontent.com/u/10133457</a>" width="100px;" alt=""/&gt;&lt;br /&gt;&lt;sub&gt;&lt;b&gt;Floessie&lt;/b&gt;&lt;/sub&gt;&lt;/a&gt;&lt;br /&gt;&lt;a title="Code"&gt;💻&lt;/a&gt;&lt;/td&gt;
    &lt;td align="center"&gt;&lt;a href="<a href="https://github.com/Derekduke">https://github.com/Derekduke</a>"&gt;&lt;img src="<a href="https://avatars.githubusercontent.com/u/30068270">https://avatars.githubusercontent.com/u/30068270</a>" width="100px;" alt=""/&gt;&lt;br /&gt;&lt;sub&gt;&lt;b&gt;Derekduke&lt;/b&gt;&lt;/sub&gt;&lt;/a&gt;&lt;br /&gt;&lt;a title="Code"&gt;💻&lt;/a&gt;&lt;/td&gt;
    &lt;td align="center"&gt;&lt;a href="<a href="https://github.com/balaji">https://github.com/balaji</a>"&gt;&lt;img src="<a href="https://avatars.githubusercontent.com/u/29356302">https://avatars.githubusercontent.com/u/29356302</a>" width="100px;" alt=""/&gt;&lt;br /&gt;&lt;sub&gt;&lt;b&gt;Balaji.V&lt;/b&gt;&lt;/sub&gt;&lt;/a&gt;&lt;br /&gt;&lt;a title="Code"&gt;💻&lt;/a&gt;&lt;a title=Documentation"&gt;📖  </td></tr>
<tr>
<td align="center"><a href="https://github.com/neboskreb"><img src="https://avatars.githubusercontent.com/u/35344069" alt="" width="100px;" class="inline"/><br  />
<sub><b>John Y. Pazekha</b></sub></a><br  />
💻&lt;a title=Documentation"&gt;📖&lt;/a&gt;&lt;/td&gt;
    &lt;td align="center"&gt;&lt;a href="<a href="https://github.com/gpb01">https://github.com/gpb01</a>"&gt;&lt;img src="<a href="https://avatars.githubusercontent.com/u/4134059">https://avatars.githubusercontent.com/u/4134059</a>" width="100px;" alt=""/&gt;&lt;br /&gt;&lt;sub&gt;&lt;b&gt;Guglielmo Braguglia&lt;/b&gt;&lt;/sub&gt;&lt;/a&gt;&lt;br /&gt;&lt;a title="Code"&gt;💻&lt;/a&gt;&lt;a title=Documentation"&gt;📖 </td><td align="center"><a href="https://github.com/ShortArrow"><img src="https://avatars.githubusercontent.com/u/16986253" alt="" width="100px;" class="inline"/><br  />
<sub><b>ShortArrow</b></sub></a><br  />
&lt;a title=Documentation"&gt;📖&lt;/a&gt;&lt;/td&gt;
    &lt;td align="center"&gt;&lt;a href="<a href="https://github.com/altugbakan">https://github.com/altugbakan</a>"&gt;&lt;img src="<a href="https://avatars.githubusercontent.com/u/43248015">https://avatars.githubusercontent.com/u/43248015</a>" width="100px;" alt=""/&gt;&lt;br /&gt;&lt;sub&gt;&lt;b&gt;Altuğ Bakan&lt;/b&gt;&lt;/sub&gt;&lt;/a&gt;&lt;br /&gt;&lt;a title="Code"&gt;💻&lt;/a&gt;&lt;/td&gt;
    &lt;td align="center"&gt;&lt;a href="<a href="https://github.com/ikatz-drizly">https://github.com/ikatz-drizly</a>"&gt;&lt;img src="<a href="https://avatars.githubusercontent.com/u/87482555">https://avatars.githubusercontent.com/u/87482555</a>" width="100px;" alt=""/&gt;&lt;br /&gt;&lt;sub&gt;&lt;b&gt;Ian Katz&lt;/b&gt;&lt;/sub&gt;&lt;/a&gt;&lt;br /&gt;&lt;a title="Code"&gt;💻&lt;/a&gt;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;





This project follows the &lt;a href="<a href="https://github.com/all-contributors/all-contributors">https://github.com/all-contributors/all-contributors</a>" &gt;all-contributors specification. Contributions of any kind welcome! </td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_584452064a033d8aa0d8f24e272c0625.html">SafeTown Arduino Workspace</a></li><li class="navelem"><a class="el" href="dir_d9fdbc748a20c8f708ebe70045d671a0.html">libraries</a></li><li class="navelem"><a class="el" href="dir_969a1e4381de3e33d8fcf67adad41556.html">FreeRTOS</a></li>
    <li class="footer">Generated on Tue Apr 8 2025 17:22:10 for SafeTown Senior Robot by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
