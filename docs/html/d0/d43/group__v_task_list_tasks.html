<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SafeTown Senior Robot: vTaskListTasks</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">SafeTown Senior Robot
   </div>
   <div id="projectbrief">Arduino workspace for SafeTown Senior Robot development.</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d0/d43/group__v_task_list_tasks.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">vTaskListTasks</div></div>
</div><!--header-->
<div class="contents">
<p><a class="el" href="../../db/da4/task_8h_source.html">task.h</a> </p><div class="fragment"><div class="line">BaseType_t xTaskCallApplicationTaskHook( TaskHandle_t xTask, <span class="keywordtype">void</span> *pvParameter );</div>
</div><!-- fragment --><p>Calls the hook function associated with xTask. Passing xTask as NULL has the effect of calling the Running tasks (the calling task) hook function.</p>
<p>pvParameter is passed to the hook function for the task to interpret as it wants. The return value is the value returned by the task hook function registered by the user. xTaskGetIdleTaskHandle() is only available if INCLUDE_xTaskGetIdleTaskHandle is set to 1 in <a class="el" href="../../de/d33/_free_r_t_o_s_config_8h_source.html">FreeRTOSConfig.h</a>.</p>
<p>In single-core FreeRTOS, this function simply returns the handle of the idle task. It is not valid to call xTaskGetIdleTaskHandle() before the scheduler has been started.</p>
<p>In the FreeRTOS SMP, there are a total of configNUMBER_OF_CORES idle tasks:</p><ol type="1">
<li>1 Active idle task which does all the housekeeping.</li>
<li>( configNUMBER_OF_CORES - 1 ) Passive idle tasks which do nothing. These idle tasks are created to ensure that each core has an idle task to run when no other task is available to run. Call xTaskGetIdleTaskHandle() or xTaskGetIdleTaskHandleForCore() with xCoreID set to 0 to get the Active idle task handle. Call xTaskGetIdleTaskHandleForCore() with xCoreID set to 1,2 ... ( configNUMBER_OF_CORES - 1 ) to get the Passive idle task handles. configUSE_TRACE_FACILITY must be defined as 1 in <a class="el" href="../../de/d33/_free_r_t_o_s_config_8h_source.html">FreeRTOSConfig.h</a> for uxTaskGetSystemState() to be available.</li>
</ol>
<p>uxTaskGetSystemState() populates an TaskStatus_t structure for each task in the system. TaskStatus_t structures contain, among other things, members for the task handle, task name, task priority, task state, and total amount of run time consumed by the task. See the TaskStatus_t structure definition in this file for the full member list.</p>
<p>NOTE: This function is intended for debugging use only as its use results in the scheduler remaining suspended for an extended period.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pxTaskStatusArray</td><td>A pointer to an array of TaskStatus_t structures. The array must contain at least one TaskStatus_t structure for each task that is under the control of the RTOS. The number of tasks under the control of the RTOS can be determined using the uxTaskGetNumberOfTasks() API function.</td></tr>
    <tr><td class="paramname">uxArraySize</td><td>The size of the array pointed to by the pxTaskStatusArray parameter. The size is specified as the number of indexes in the array, or the number of TaskStatus_t structures contained in the array, not by the number of bytes in the array.</td></tr>
    <tr><td class="paramname">pulTotalRunTime</td><td>If configGENERATE_RUN_TIME_STATS is set to 1 in <a class="el" href="../../de/d33/_free_r_t_o_s_config_8h_source.html">FreeRTOSConfig.h</a> then *pulTotalRunTime is set by uxTaskGetSystemState() to the total run time (as defined by the run time stats clock, see <a href="https://www.FreeRTOS.org/rtos-run-time-stats.html">https://www.FreeRTOS.org/rtos-run-time-stats.html</a>) since the target booted. pulTotalRunTime can be set to NULL to omit the total run time information.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of TaskStatus_t structures that were populated by uxTaskGetSystemState(). This should equal the number returned by the uxTaskGetNumberOfTasks() API function, but will be zero if the value passed in the uxArraySize parameter was too small.</dd></dl>
<p>Example usage: </p><div class="fragment"><div class="line"> <span class="comment">// This example demonstrates how a human readable table of run time stats</span></div>
<div class="line"> <span class="comment">// information is generated from raw data provided by uxTaskGetSystemState().</span></div>
<div class="line"> <span class="comment">// The human readable table is written to pcWriteBuffer</span></div>
<div class="line"> <span class="keywordtype">void</span> vTaskGetRunTimeStats( <span class="keywordtype">char</span> *pcWriteBuffer )</div>
<div class="line"> {</div>
<div class="line"> TaskStatus_t *pxTaskStatusArray;</div>
<div class="line"> <span class="keyword">volatile</span> UBaseType_t uxArraySize, x;</div>
<div class="line"> configRUN_TIME_COUNTER_TYPE ulTotalRunTime, ulStatsAsPercentage;</div>
<div class="line"> </div>
<div class="line">     <span class="comment">// Make sure the write buffer does not contain a string.</span></div>
<div class="line">pcWriteBuffer = 0x00;</div>
<div class="line"> </div>
<div class="line">     <span class="comment">// Take a snapshot of the number of tasks in case it changes while this</span></div>
<div class="line">     <span class="comment">// function is executing.</span></div>
<div class="line">     uxArraySize = uxTaskGetNumberOfTasks();</div>
<div class="line"> </div>
<div class="line">     <span class="comment">// Allocate a TaskStatus_t structure for each task.  An array could be</span></div>
<div class="line">     <span class="comment">// allocated statically at compile time.</span></div>
<div class="line">     pxTaskStatusArray = pvPortMalloc( uxArraySize * <span class="keyword">sizeof</span>( TaskStatus_t ) );</div>
<div class="line"> </div>
<div class="line">     <span class="keywordflow">if</span>( pxTaskStatusArray != NULL )</div>
<div class="line">     {</div>
<div class="line">         <span class="comment">// Generate raw status information about each task.</span></div>
<div class="line">         uxArraySize = uxTaskGetSystemState( pxTaskStatusArray, uxArraySize, &amp;ulTotalRunTime );</div>
<div class="line"> </div>
<div class="line">         <span class="comment">// For percentage calculations.</span></div>
<div class="line">         ulTotalRunTime /= 100U;</div>
<div class="line"> </div>
<div class="line">         <span class="comment">// Avoid divide by zero errors.</span></div>
<div class="line">         <span class="keywordflow">if</span>( ulTotalRunTime &gt; 0 )</div>
<div class="line">         {</div>
<div class="line">             <span class="comment">// For each populated position in the pxTaskStatusArray array,</span></div>
<div class="line">             <span class="comment">// format the raw data as human readable ASCII data</span></div>
<div class="line">             <span class="keywordflow">for</span>( x = 0; x &lt; uxArraySize; x++ )</div>
<div class="line">             {</div>
<div class="line">                 <span class="comment">// What percentage of the total run time has the task used?</span></div>
<div class="line">                 <span class="comment">// This will always be rounded down to the nearest integer.</span></div>
<div class="line">                 <span class="comment">// ulTotalRunTimeDiv100 has already been divided by 100.</span></div>
<div class="line">                 ulStatsAsPercentage = pxTaskStatusArray[ x ].ulRunTimeCounter / ulTotalRunTime;</div>
<div class="line"> </div>
<div class="line">                 <span class="keywordflow">if</span>( ulStatsAsPercentage &gt; 0U )</div>
<div class="line">                 {</div>
<div class="line">                     sprintf( pcWriteBuffer, <span class="stringliteral">&quot;%s\t\t%lu\t\t%lu%%\r\n&quot;</span>, pxTaskStatusArray[ x ].pcTaskName, pxTaskStatusArray[ x ].ulRunTimeCounter, ulStatsAsPercentage );</div>
<div class="line">                 }</div>
<div class="line">                 <span class="keywordflow">else</span></div>
<div class="line">                 {</div>
<div class="line">                     <span class="comment">// If the percentage is zero here then the task has</span></div>
<div class="line">                     <span class="comment">// consumed less than 1% of the total run time.</span></div>
<div class="line">                     sprintf( pcWriteBuffer, <span class="stringliteral">&quot;%s\t\t%lu\t\t&lt;1%%\r\n&quot;</span>, pxTaskStatusArray[ x ].pcTaskName, pxTaskStatusArray[ x ].ulRunTimeCounter );</div>
<div class="line">                 }</div>
<div class="line"> </div>
<div class="line">                 pcWriteBuffer += strlen( ( <span class="keywordtype">char</span> * ) pcWriteBuffer );</div>
<div class="line">             }</div>
<div class="line">         }</div>
<div class="line"> </div>
<div class="line">         <span class="comment">// The array is no longer needed, free the memory it consumes.</span></div>
<div class="line">         vPortFree( pxTaskStatusArray );</div>
<div class="line">     }</div>
<div class="line"> }</div>
</div><!-- fragment --><p> task. h </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> vTaskListTasks( <span class="keywordtype">char</span> *pcWriteBuffer, <span class="keywordtype">size_t</span> uxBufferLength );</div>
</div><!-- fragment --><p>configUSE_TRACE_FACILITY and configUSE_STATS_FORMATTING_FUNCTIONS must both be defined as 1 for this function to be available. See the configuration section of the FreeRTOS.org website for more information.</p>
<p>NOTE 1: This function will disable interrupts for its duration. It is not intended for normal application runtime use but as a debug aid.</p>
<p>Lists all the current tasks, along with their current state and stack usage high water mark.</p>
<p>Tasks are reported as blocked ('B'), ready ('R'), deleted ('D') or suspended ('S').</p>
<p>PLEASE NOTE:</p>
<p>This function is provided for convenience only, and is used by many of the demo applications. Do not consider it to be part of the scheduler.</p>
<p>vTaskListTasks() calls uxTaskGetSystemState(), then formats part of the uxTaskGetSystemState() output into a human readable table that displays task: names, states, priority, stack usage and task number. Stack usage specified as the number of unused StackType_t words stack can hold on top of stack - not the number of bytes.</p>
<p>vTaskListTasks() has a dependency on the snprintf() C library function that might bloat the code size, use a lot of stack, and provide different results on different platforms. An alternative, tiny, third party, and limited functionality implementation of snprintf() is provided in many of the FreeRTOS/Demo sub-directories in a file called printf-stdarg.c (note printf-stdarg.c does not provide a full snprintf() implementation!).</p>
<p>It is recommended that production systems call uxTaskGetSystemState() directly to get access to raw stats data, rather than indirectly through a call to vTaskListTasks().</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pcWriteBuffer</td><td>A buffer into which the above mentioned details will be written, in ASCII form. This buffer is assumed to be large enough to contain the generated report. Approximately 40 bytes per task should be sufficient.</td></tr>
    <tr><td class="paramname">uxBufferLength</td><td>Length of the pcWriteBuffer. </td></tr>
  </table>
  </dd>
</dl>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Apr 8 2025 17:22:09 for SafeTown Senior Robot by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
